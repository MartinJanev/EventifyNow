<div class="events-page">
  <div class="search-bar">
    <form class="search-form">
      <input
        #eventFilter
        [(ngModel)]="searchText"
        name="searchText"
        placeholder="Search event"
        type="text"
      />
      <input
        #cityFilter
        [(ngModel)]="cityText"
        name="cityText"
        placeholder="City"
        type="text"
      />
      <button
        (click)="filterResults()"
        class="search-button"
        type="button"
      >
        Search
      </button>
    </form>
  </div>

  <div class="add-event-section">
    <h2>Want to add an event?</h2>
    <p>Click the button below to add an event</p>
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
      <a routerLink="/events/new" class="add-event-button">Add Event</a>
      <button (click)="seedDummyData()" class="add-event-button" type="button" style="background: #10b981; border: none; cursor: pointer;">
        ğŸŒ± Seed Dummy Data
      </button>
      <button (click)="deleteAllEvents()" class="add-event-button" type="button" style="background: #ef4444; border: none; cursor: pointer; font-size: 0.9rem; padding: 0.6rem 1rem;">
        ğŸ—‘ï¸ Delete All
      </button>
    </div>
  </div>

  <app-loading-spinner
    *ngIf="loading"
    message="Loading events..."
  ></app-loading-spinner>

  <section class="results" *ngIf="!loading">
    <ng-container *ngIf="filteredEvents$ | async as filteredEvents">
      <app-event-card
        *ngFor="let event of filteredEvents"
        [event]="event"
        (delete)="deleteEvent($event)"
      ></app-event-card>

      <div *ngIf="filteredEvents.length === 0" class="empty-message">
        <app-empty-state
          icon="ğŸ”"
          title="No events found"
          message="Try adjusting your search to find what you're looking for."
        ></app-empty-state>
      </div>
    </ng-container>
  </section>
</div>
